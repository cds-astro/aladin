<?xml version="1.0" encoding="UTF-8" ?> 
<!-- 
 Very simple ANT build.xml file for compiling and generating Aladin.jar file
 * Author : P.Fernique [CDS]
 * Date   : Sep 2018
 * Rev1   : Mar 2021
-->

<project name="Aladin" default="main" basedir="."> 

   <description>Aladin Sky Atlas</description> 
   <property name="bin" value="${basedir}/bin"/>
   
   <target name="compil" description="source compilation" >
     <mkdir dir="${bin}"/>
     <javac destdir="${bin}"
	    encoding="UTF-8" source="1.7" target="1.7" deprecation="off" >
         <src path="${basedir}/cds/astro"/>
     </javac>
     <javac srcdir="${basedir}" destdir="${bin}"
	    encoding="Cp1252" source="1.7" target="1.7" deprecation="off" >
       <classpath>
          <pathelement path="${java.class.path}/"/>
          <pathelement path="adql1.3.jar"/>
          <pathelement path="jsamp.jar"/>
          <pathelement path="kml2-2.3.0.jar"/>
          <pathelement path="cdshealpix.0.28_1.jar"/>
      </classpath>
     </javac>
   </target>
   
   <target name="main" depends="compil" description="jar generation" >
      <jar destfile="Aladin.jar" duplicate="preserve">
        <fileset dir="${bin}"/>
	    <zipfileset src="adql1.3.jar"/>
	    <zipfileset src="jsamp.jar"/>
	    <zipfileset src="kml2-2.3.0.jar"/>
        <zipfileset src="cdshealpix.0.28_1.jar"/>
	    <fileset dir="${basedir}" includes="*.gif,*.jpg,*.png,Ala*.*,Constellation.txt,viewConfiguration.properties,StandardForms.dic"/>
        <manifest>
           <attribute name="Main-Class" value="cds.aladin.Aladin" />
        </manifest>
      </jar>
   </target>
   
   <target name="clean" description="Remove building directory" >
      <delete includeEmptyDirs="true" quiet="true">
	     <fileset dir="${bin}" />
      </delete>
   </target>
   
</project>

